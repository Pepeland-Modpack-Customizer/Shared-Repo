generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int       @id @unique @default(autoincrement())
  displayName String
  sessions    Session[]
}

model Session {
  sessionId String          @id @unique
  userId    Int             @unique
  user      User            @relation(fields: [userId], references: [id])
  userAgent String
  expiresIn DateTime
  actions   UserActionLog[]
}

model UserActionLog {
  actionId   Int            @id @unique @default(autoincrement())
  sessionId  String         @unique
  session    Session        @relation(fields: [sessionId], references: [sessionId])
  actionType UserActionType
  actionTime DateTime       @default(now())
  actionData Json?
}

enum UserActionType {
  Login
  Logout
  DisplayNameChange
  LoginMethodChange
  ModpackChange
}
